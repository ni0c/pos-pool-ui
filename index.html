<!doctype html>
<html lang="en">

	<head>
		<title>Webomatic Proof-of-Stake Pool on Conflux</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Webomatic Proof-of-Stake Pool on Conflux">
		<meta name="keywords" content="Conflux, PoS, Pool">
		<link rel="shortcut icon" href="favicon.ico">
                <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Comfortaa" />
		<meta property="og:title" content="Webomatic Proof-of-Stake Pool on Conflux" /> 
                <meta property="og:url" content="https://pos.webomatic.xyz/" /> 
                <meta property="og:image" content="https://pos.webomatic.xyz/pos.png" />
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
		<link rel="stylesheet" href="main.css?v1.03">
	</head>

	<body class="_bs2">

		<div id="app">

			<div id="header-container">
				<div id="webomatic">
					<span id="w_webo">w</span> web-o-matic
				</div>

				<h1><img src="conflux.svg" id="conflux-logo" /> Conflux Proof-of-Stake Pool</h1>
				<p>Stake your CFX in Conflux PoS Pool to help improve the network's finality and earn PoS rewards</p>
			</div>

			<div id="button-conn">
				<button v-if="!userInfo.connected" class="btn btn-primary" v-on:click="connectWallet">Connect Conflux Wallet</button>
				<span v-else>
					<button type="button" class="btn btn-outline-primary">
						{{shortenAccount}}
					</button>
				</span>
			</div>


			<div id="top-notice">
				<div class="alert alert-primary" role="alert">
					1. The PoS reward will start distributing after epochNumber 37400000.
					<br />
					2. The earlier you stake, the higher the reward.
					<br />
					3. Pool performance fee is 3% of the PoS reward.
					<br />
					4. The first 200 stakers will receive a Webomatic PoS VIP NFT. First 100 will get Platinum NFT and 101-200 will get Golden NFT.
					<br />
				</div>
			</div>

			<div v-if="chainStatus.epochNumber" id="current-epoch">
				<div class="alert alert-secondary" role="alert">
					Current Epoch: {{chainStatus.epochNumber}}  -  Current Block: {{chainStatus.blockNumber}}
				</div>
			</div>

			<div id="info-container">
				<div class="info-wrap">
					<div class="icon-left">
						<i class="bi-bank"></i>
					</div>
					<div class="info-right">
						<div><span class="h-num" :title="formatedTotalLocked">{{prettyTotalLocked}}</span></div>
						<span class="intro-title">Staking Vault</span>
					</div>
				</div>
				<div class="info-wrap">
					<div class="icon-left">
						<i class="bi-cash-coin"></i>
					</div>
					<div class="info-right">
						<div><span class="h-num" :title="formatedTotalRevenue">{{prettyTotalRevenue}}</span></div>
						<span class="intro-title">Total CFX earned</span>
					</div>
				</div>
				<div class="info-wrap">
					<div class="icon-left">
						<i class="bi-percent"></i>
					</div>
					<div class="info-right">
						<div><span class="h-num">{{poolInfo.apy}}%</span></div>
						<span class="intro-title">Expected APY</span>
					</div>
				</div>
				<div class="info-wrap">
					<div class="icon-left">
						<i class="bi-people"></i>
					</div>
					<div class="info-right">
						<div><span class="h-num">{{poolInfo.stakerNumber}}</span></div>
						<span class="intro-title">Staker Number</span>
					</div>
				</div>
				<div class="info-wrap">
					<div class="icon-left">
						<i class="bi-plug"></i>
					</div>
					<div class="info-right">
						<div>
							<span v-if="poolInfo.status.forceRetired === true" class="h-num h-err">Error</span>
							<span v-else class="h-num h-ok">Good</span>
						</div>
						<span class="intro-title">Pool Status</span>
					</div>
				</div>
				<div class="info-wrap">
					<div class="icon-left">
						<i class="bi-pin-map-fill"></i>
					</div>
					<div class="info-right">
						<div class="h-addr">
							<a :href="posAddressLink" target="_blank" title="Link to Conflux Scan">{{shortPosAddress}}</a>
						</div>
						<span class="intro-title">PoS address</span>
					</div>
				</div>

				<div class="clearfix"></div>

			</div>

			<div class="clearfix"></div>

			<div id="staking-info-container">

				<div class="staking-wrap">
					<div>
						<div><span class="h-num">{{userStakedCFX}}</span></div>
						<span class="intro-title">My Staked (CFX)</span>
					</div>
					<div>
						<div class="input-1">
							<input class="form-control" type="number" v-model="stakeCount">
						</div>
						<div class="button-1">
							<button class="btn btn-primary" v-on:click="stake" :disabled="!userInfo.connected">Stake</button>
						</div>
					</div>
					<p class="intro-title mt-1" v-if="userInfo.connected">Balance: {{userInfo.balance}} CFX</p>
				</div>

				<div class="staking-wrap">
					<div>
						<div><span class="h-num">{{userInfo.userInterest}}</span></div>
						<span class="intro-title">My Rewards (CFX)</span>
					</div>
					<button class="btn btn-primary mt-2" v-on:click="claim" :disabled="!userInfo.connected">Claim</button>
					<p class="intro-title mt-1" v-if="userInfo.connected && poolInfo.lastRewardTime > 0">Last Update:
						{{lastRewardTime}}</p>
				</div>

				<div class="staking-wrap">
					<div>
						<div><span class="h-num">{{unstakeableCFX}}</span></div>
						<span class="intro-title">Unstakeable CFX</span>
					</div>
					<div>
						<div class="input-1">
							<input class="form-control" type="number" v-model="unstakeCount">
						</div>
						<div class="button-1">
							<button class="btn btn-primary" v-on:click="unstake" :disabled="!userInfo.connected">Unstake</button>
						</div>
					</div>
				</div>

				<div class="staking-wrap">
					<div>
						<div><span class="h-num">{{withdrawableCFX}}</span></div>
						<span class="intro-title">Withdrawable CFX</span>
					</div>
					<div class="button-2">
						<button class="btn btn-primary" v-on:click="withdraw" :disabled="!userInfo.connected">Withdraw</button>
					</div>
				</div>

				<div class="clearfix"></div>

			</div>


			<div class="modal fade" id="hashModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">

							<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body text-center">
							<i class="bi-check-circle-fill"></i>
							<br />
							<span>Transaction Submitted.</span>

							<div></div>
						</div>

					</div>
				</div>
			</div>
			<div id="votes-container" v-if="userInfo.connected">

				<h5>Locking votes</h5>
				<table class="table caption-top">
					<thead>
						<tr>
							<th scope="col">Amount (CFX)</th>
							<th scope="col">EndTime</th>
						</tr>
					</thead>
					<tbody>
						<tr v-for="item in userInfo.userInQueue">
							<th scope="row">{{item.amount}}</th>
							<td>{{item.endTime}}</td>
						</tr>
					</tbody>
				</table>

				<h5>Unlocking votes</h5>
				<table class="table caption-top">
					<thead>
						<tr>
							<th scope="col">Amount (CFX)</th>
							<th scope="col">EndTime</th>
						</tr>
					</thead>
					<tbody>
						<tr v-for="item in userInfo.userOutOueue">
							<th scope="row">{{item.amount}}</th>
							<td>{{item.endTime}}</td>
						</tr>
					</tbody>
				</table>

			</div>

			<div id="rules-header">
				<h4>Staking Rules</h4>
			</div>
			<div id="rules-container">
				<ul>
					<li>The Stake/Unstake CFX amount must be multiple of 1000 CFX</li>
					<li>The Lock Period of Stake/Unstake is 7 Days</li>

					<li>The pool performance fee is 3% of PoS reward.</li>
					<li>The Reward Updates Every Hour after PoS Rewards start accruing (After Epoch 37400000).</li>
				</ul>
			</div>

			<div id="footer-container">
				<a class="footer-item" href="https://github.com/conflux-fans/pos-pool" target="_blank">Github Contracts</a>
				<a class="footer-item" href="https://github.com/ni0c/pos-pool-ui" target="_blank">Github UI</a>
			</div>

		</div>


		<!-- scripts -->

		<script src="https://unpkg.com/vue@3"></script>
		<script src="https://cdn.jsdelivr.net/npm/big.js@6.0.0/big.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
		<script src="js/js-conflux-sdk.umd.min.js"></script>
		<script src="js/PoolABI.js"></script>
		<script src="js/misc.js"></script>
		<script src="main.js?v1.03"></script>

	</body>

</html>
